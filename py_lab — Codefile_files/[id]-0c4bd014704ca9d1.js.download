(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{9116:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/f/[id]",function(){return i(2634)}])},1918:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=i(5893),s=i(7294);function o(e){return(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,n.jsx)("meta",{name:"description",content:"Codefile is a collaborative online code editor to share code in real-time with other developers. Create, share and edit collaborative code snippets online for your technical interviews, pair programming, teaching, etc."}),(0,n.jsx)("meta",{name:"keywords",content:"online code editor, share code online, code interviews, pair programming, codefile"}),(0,n.jsx)("meta",{property:"og:title",content:e.title}),(0,n.jsx)("meta",{property:"og:url",content:e.url}),(0,n.jsx)("meta",{property:"og:image",content:"https://codefile.io/logo_background.png"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:description",content:"Create collaborative code files online for your technical interviews, pair programming, teaching, etc."}),(0,n.jsx)("meta",{property:"og:site_name",content:"Codefile.io"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"icon",sizes:"16x16 32x32 64x64",href:"/favicon.ico"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"196x196",href:"/favicon-192.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"160x160",href:"/favicon-160.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/favicon-96.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"64x64",href:"/favicon-64.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon-32.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon-16.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"/favicon-57.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"114x114",href:"/favicon-114.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"72x72",href:"/favicon-72.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"144x144",href:"/favicon-144.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"60x60",href:"/favicon-60.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"120x120",href:"/favicon-120.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"76x76",href:"/favicon-76.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:"/favicon-152.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon-180.png"}),(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=G-E5BF8X9E91"}),(0,n.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('js', new Date());\n              gtag('config', 'G-E5BF8X9E91', {\n                page_path: window.location.pathname,\n              });\n          "}})]})]})}},1635:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var n=i(5893),s=i(9008),o=i.n(s);i(7814);var a=i(8395),l=i(7294);function c(){return(0,l.useEffect)(()=>{document.body.style=""}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"Codefile — 404 Page Not Found"}),(0,n.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"}),(0,n.jsx)("meta",{name:"description",content:"Codefile is an online code editor to create collaborative code files for your technical interviews, pair programming, teaching, etc."})]}),(0,n.jsx)(a.Z,{}),(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"row pt-5",children:(0,n.jsxs)("div",{className:"col-12 text-center p-5",children:[(0,n.jsxs)("h1",{className:"mt-5",children:["\uD83D\uDE3F",(0,n.jsx)("br",{}),"Ooops!"]}),(0,n.jsx)("p",{className:"lead mb-0 text-muted",children:"We couldn't find that page."}),(0,n.jsx)("p",{className:"text-muted",children:"(Error: 404 Page Not Found)"}),(0,n.jsx)("a",{href:"/",className:"btn btn-cf rounded-pill mt-3",children:"Go to Home ->"})]})})})]})}},2634:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return S}});var n=i(5893),s=i(4364),o=i(7814),a=i(1436),l=i(6486),c=i(2801),r=i(5944),d=i(3489),u=i(7294),m=i(9008),p=i.n(m),h=i(1635),x=i(1918),f=i(6024),v=i(533),g=i(6785),j=i(8344),w=i(7421),b=i(8120),y=i(6379),N=i(5477),k=i(913),S=!0;t.default=function(e){var t,i,m,S,I,_,C,Z;let[z,E]=(0,u.useState)(null===(t=e.file)||void 0===t?void 0:t.code),[T,P]=(0,u.useState)(!1),[q,G]=(0,u.useState)(null===(i=e.file)||void 0===i?void 0:null===(m=i.files_private)||void 0===m?void 0:m.protected),[O,F]=(0,u.useState)(s.Mj.map(e=>e.value).includes(null===(S=e.file)||void 0===S?void 0:S.mode)?null===(I=e.file)||void 0===I?void 0:I.mode:"javascript"),[D,L]=(0,u.useState)(s.np.map(e=>e.value).includes(null===(_=e.file)||void 0===_?void 0:_.theme)?null===(C=e.file)||void 0===C?void 0:C.theme:"dark"),[B,M]=(0,u.useState)(null===(Z=e.file)||void 0===Z?void 0:Z.title),[R,H]=(0,u.useState)(!0),[U,X]=(0,u.useState)([{}]),[J,W]=(0,u.useState)(!1),[A,Q]=(0,u.useState)(!1),V=(0,c.r)(),[K,Y]=(0,u.useState)(!1),[$,ee]=(0,u.useState)(!1),et=(0,u.useRef)({}),[ei,en]=(0,u.useState)(0),es=(0,s.TH)();(0,u.useEffect)(async()=>{await ed(),es.channel("any").on("postgres_changes",{event:"UPDATE",schema:"public",table:"files",filter:"id=eq.".concat(e.fileId)},el).subscribe(),eo(),ea()},[]);let eo=async()=>{var t,i;let{data:n}=await es.from("favorites").select("file_id, files(*)").eq("user_id",window.sessionStorage.getItem("userId")).eq("file_id",e.fileId);ee(!!(null==n?void 0:null===(t=n[0])||void 0===t?void 0:null===(i=t.files)||void 0===i?void 0:i.id))},ea=async()=>{var t;let{data:i,error:n}=await es.from("files_private").select("created_by, files(*)").eq("created_by",window.sessionStorage.getItem("userId")).eq("file_id",e.fileId);P(!!(null==i?void 0:null===(t=i[0])||void 0===t?void 0:t.created_by))},el=async e=>{let t=e.new;H(t.last_update_by==window.sessionStorage.getItem("userId")),t.last_update_by!=window.sessionStorage.getItem("userId")&&(et.current.view.state.doc.toString()!=t.code&&E(t.code),F(t.mode),L(t.theme),en(t.pos))},ec=async()=>{var t,i,n;let s=await es.auth.getSession(),o=null===(t=s.data)||void 0===t?void 0:null===(i=t.session)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.email;!o||o.includes("@guest.com")?Y(!0):(ee(!0),await fetch("https://zlizsczfjuzthnepbjkq.functions.supabase.co/add-favorite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:window.sessionStorage.getItem("userId"),fileId:e.fileId})}))},er=async()=>{var t,i,n;let s=await es.auth.getSession(),o=null===(t=s.data)||void 0===t?void 0:null===(i=t.session)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.email;if(!o||o.includes("@guest.com"))Y(!0);else{ee(!1);let{data:t,error:i}=await es.from("favorites").delete().eq("user_id",window.sessionStorage.getItem("userId")).eq("file_id",e.fileId)}},ed=async()=>{var t,i,n,o,a;let{data:l}=await es.auth.getSession(),c=null==l?void 0:null===(t=l.session)||void 0===t?void 0:null===(i=t.user)||void 0===i?void 0:i.email;if(c)window.sessionStorage.setItem("userId",l.session.user.id);else{if(window.sessionStorage.getItem("email"))c=window.sessionStorage.getItem("email");else{c="".concat((0,s.Of)(),"@guest.com");let{data:e}=await es.auth.signUp({email:c,password:"123456"})}let e=await es.auth.signInWithPassword({email:c,password:"123456"});window.sessionStorage.setItem("userId",e.data.user.id),window.sessionStorage.setItem("email",c)}await fetch("https://zlizsczfjuzthnepbjkq.functions.supabase.co/add-viewed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:window.sessionStorage.getItem("userId"),fileId:e.fileId})});let r=await es.auth.getSession(),d=es.channel("".concat(e.fileId),{config:{presence:{key:null===(n=r.data)||void 0===n?void 0:null===(o=n.session)||void 0===o?void 0:null===(a=o.user)||void 0===a?void 0:a.id}}});d.on("presence",{event:"sync"},()=>{X(Object.keys(d.presenceState()))}),d.on("presence",{event:"join"},e=>{let{newPresences:t}=e;X(Object.keys(d.presenceState()))}),d.on("presence",{event:"leave"},e=>{let{leftPresences:t}=e;X(Object.keys(d.presenceState()))}),d.subscribe(async e=>{"SUBSCRIBED"===e&&await d.track({online_at:new Date().toISOString()})})},eu=(0,u.useCallback)((0,l.debounce)(em,500,{leading:!1}),[]);async function em(){var t,i,n,s,o;await es.from("files").update({code:et.current.view.state.doc.toString(),pos:(null===(t=et.current)||void 0===t?void 0:null===(i=t.view)||void 0===i?void 0:null===(n=i.state)||void 0===n?void 0:null===(s=n.selection)||void 0===s?void 0:null===(o=s.main)||void 0===o?void 0:o.head)||0,last_update_by:window.sessionStorage.getItem("userId"),updated_at:Date.now()}).eq("id",e.fileId)}let ep=e=>{E(e),H(!0),eu()},eh=async t=>{F(t.target.value);let{error:i}=await es.from("files").update({mode:t.target.value}).eq("id",e.fileId)},ex=async t=>{L(t.target.value);let{error:i}=await es.from("files").update({theme:t.target.value}).eq("id",e.fileId)},ef=async t=>{M(t.target.value);let{error:i}=await es.from("files").update({title:t.target.value}).eq("id",e.fileId)},ev=()=>{navigator.clipboard.writeText(z)},eg=b.QQ.define({create:()=>[],update:()=>R?[]:[{pos:ei,above:!0,strictSide:!0,arrow:!0,create:()=>{let e=document.createElement("div");return e.className="cm-tooltip-cursor",e.textContent="\uD83D\uDC4B",{dom:e}}}],provide:e=>w.hJ.computeN([e],t=>t.field(e))}),ej=async t=>{let{data:i,error:n}=await es.from("files_private").update({protected:t}).eq("file_id",e.fileId)},ew=()=>{navigator.clipboard.writeText(window.location.href),W(!0),setTimeout(()=>{W(!1)},1e3)};return e.err?(0,n.jsx)(h.default,{}):(0,n.jsxs)(u.Fragment,{children:[(0,n.jsxs)(p(),{children:[(0,n.jsx)("title",{children:"".concat(B||"Error"," — Codefile")}),(0,n.jsx)(x.Z,{title:"".concat(B||"Error"," — Codefile"),url:"https://codefile.io/f/".concat(e.fileId)}),(0,n.jsx)("meta",{name:"viewport",content:"width=576"}),(0,n.jsx)("meta",{name:"robots",content:"noindex"})]}),(0,n.jsx)("section",{className:"navbar-cf container-fuild py-3 px-4",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col-12 d-flex justify-content-between align-items-center",children:[(0,n.jsx)("a",{href:"/",className:"logo-cf mr-3 pr-3 border-right",children:(0,n.jsx)("img",{src:"/logo_simple.png",height:30,alt:"Codefile logo symbol"})}),(0,n.jsx)("input",{className:"w-100 file-title",value:B,readOnly:q,onChange:ef,maxLength:"100"}),(0,n.jsxs)("div",{className:"text-nowrap",children:[(0,n.jsx)(r.Z,{placement:"bottom",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Viewers"})}),children:(0,n.jsxs)("span",{className:"d-inline-block text-nowrap mx-2",children:[(0,n.jsx)(o.G,{icon:a.ILF,className:"mr-2 text-success small"}),(0,n.jsx)("b",{children:(null==U?void 0:U.length)||1})]})}),q?(0,n.jsx)(r.Z,{placement:"bottom",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"This file is Protected. Nobody can modify it."})}),children:(0,n.jsx)("span",{className:"mx-3",children:(0,n.jsx)(o.G,{icon:a.byT,className:"text-muted small"})})}):"",(0,n.jsx)(r.Z,{rootClose:!0,trigger:"click",placement:"bottom",overlay:(0,n.jsxs)(k.Z,{className:"py-4 px-4 w-auto",children:[(0,n.jsx)("p",{className:"text-muted",children:"Share this link with other developers:"}),(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,n.jsx)("input",{className:"form-control mr-3",value:window.location.href}),J?(0,n.jsxs)("button",{className:"text-nowrap btn btn-cf rounded-pill",children:[(0,n.jsx)(o.G,{icon:a.LEp,className:"mr-2"}),(0,n.jsx)("span",{children:"Copied!"})]}):(0,n.jsxs)("button",{className:"text-nowrap btn btn-cf rounded-pill",onClick:ew,children:[(0,n.jsx)(o.G,{icon:a.nNP,className:"mr-2"}),(0,n.jsx)("span",{children:"Copy link"})]})]}),(0,n.jsx)("div",{className:"custom-control custom-switch mt-5 mb-1",onClick:e=>{e.stopPropagation()},children:T?(0,n.jsxs)("span",{children:[(0,n.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"switch",checked:q,onChange:e=>{G(e.target.checked),ej(e.target.checked)}}),(0,n.jsx)("label",{className:"custom-control-label pointer",htmlFor:"switch",children:(0,n.jsx)("b",{children:"Protected"})})]}):(0,n.jsx)(r.Z,{placement:"bottom",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"This option can only be changed by the user who created this file while being Signed in."})}),children:(0,n.jsxs)("span",{children:[(0,n.jsx)("input",{type:"checkbox",className:"custom-control-input",disabled:!0,id:"switch",checked:q,onChange:e=>{G(e.target.checked),ej(e.target.checked)}}),(0,n.jsx)("label",{className:"custom-control-label pointer",htmlFor:"switch",children:(0,n.jsx)("b",{children:"Protected"})})]})})}),(0,n.jsx)("p",{className:"text-muted",children:"When enabled, nobody can modify this file. Disabled by default."})]}),children:(0,n.jsxs)("button",{className:"btn btn-cf mx-2 rounded-pill text-nowrap",children:[(0,n.jsx)("span",{className:"d-inline-block",style:{transform:"rotate(-45deg)"},children:"->"})," ","Share"]})}),(0,n.jsx)("span",{className:"mx-3",children:(0,n.jsx)(v.Z,{})})]})]})})}),(0,n.jsxs)("section",{className:"container-fluid h-flex-100",children:[(0,n.jsx)("header",{className:"row d-flex justify-content-center align-items-center",children:(0,n.jsxs)("div",{className:"col-auto text-center rounded-pill bg-white mb-4 px-4 py-2 position-fixed toolbar",children:[(0,n.jsx)(r.Z,{placement:"top",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Full screen"})}),children:(0,n.jsx)("button",{className:"btn border mx-2 bg-white rounded-8",onClick:V.enter,children:(0,n.jsx)(o.G,{icon:a.TL5})})}),(0,n.jsx)(r.Z,{placement:"top",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Copy code"})}),children:(0,n.jsx)("button",{className:"btn border mx-2 bg-white rounded-8",onClick:ev,children:(0,n.jsx)(o.G,{icon:a.kZ_})})}),(0,n.jsx)(r.Z,{placement:"top",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Settings"})}),children:(0,n.jsx)("button",{className:"btn border mx-2 bg-white rounded-8",onClick:()=>Q(!A),children:(0,n.jsx)(o.G,{icon:a.MUh})})}),$?(0,n.jsx)(r.Z,{placement:"top",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Remove from favorites"})}),children:(0,n.jsx)("button",{className:"btn bg-white rounded-8 border mx-2 ",onClick:e=>{er()},children:(0,n.jsx)(o.G,{icon:a.FTC})})}):(0,n.jsx)(r.Z,{placement:"top",overlay:(0,n.jsx)(d.Z,{children:(0,n.jsx)("p",{className:"p-1 m-0",children:"Add to favorites"})}),children:(0,n.jsx)("button",{className:"btn bg-white rounded-8 border mx-2 ",onClick:e=>{ec()},children:(0,n.jsx)(o.G,{icon:f.m6})})})]})}),!!A&&(0,n.jsx)("header",{className:"row",children:(0,n.jsxs)("div",{className:"col-auto bg-white px-4 py-3 position-fixed settings",children:[(0,n.jsxs)("div",{className:"d-flex align-items-end justify-content-between",children:[(0,n.jsx)("button",{className:"btn bg-light rounded-circle",onClick:()=>Q(!1),children:(0,n.jsx)(o.G,{icon:a.NBC})}),(0,n.jsx)("h5",{children:"Settings"}),(0,n.jsx)("button",{className:"btn",style:{visibility:"hidden"},onClick:()=>Q(!1),children:(0,n.jsx)(o.G,{icon:a.NBC})})]}),(0,n.jsx)("p",{className:"mb-0 mt-4 text-muted",children:"Editor theme:"}),(0,n.jsx)("select",{className:"custom-select w-auto m-2 rounded-8 border pointer",role:"button",value:D,disabled:q,onChange:ex,children:s.np.map((e,t)=>{let{value:i,label:s}=e;return(0,n.jsx)("option",{value:i,children:s},t)})}),(0,n.jsx)("p",{className:"mb-0 mt-3 text-muted",children:"Language syntax:"}),(0,n.jsx)("select",{className:"custom-select w-auto m-2 rounded-8 border pointer",role:"button",disabled:q,value:O,onChange:eh,children:s.Mj.map((e,t)=>{let{value:i,label:s}=e;return(0,n.jsx)("option",{value:i,children:s},t)})})]})}),(0,n.jsx)(c.I,{handle:V,className:"h-flex-100 row",children:(0,n.jsx)(j.ZP,{value:z,readOnly:q,theme:s.np.map(e=>e.value).includes(D)?y[D]||D:"dark",basicSetup:{autocompletion:!1},extensions:[s.Mj.map(e=>e.value).includes(O)?N.RI[O]():N.RI.javascript(),eg],onChange:ep,ref:et})})]}),(0,n.jsx)(g.Z,{show:K,onHide:()=>Y(!1)})]})}}},function(e){e.O(0,[523,762,662,962,799,532,395,774,888,179],function(){return e(e.s=9116)}),_N_E=e.O()}]);